<?phpnamespace Admin\Controller;class FinanceController extends AdminController{	public function index($field = NULL, $name = NULL)	{		$this->checkUpdata();		$where = array();		if ($field && $name) {			if ($field == 'username') {				$where['userid'] = M('User')->where(array('username' => $name))->getField('id');			}			else {				$where[$field] = $name;			}		}		$count = M('Mytx')->where($where)->count();		$Page = new \Think\Page($count, 15);		$show = $Page->show();		$list = M('Mytx')->where($where)->order('id desc')->limit($Page->firstRow . ',' . $Page->listRows)->select();		$name_list = array('mycz' => '人民币充值', 'mytx' => '人民币提现', 'trade' => '委托交易', 'tradelog' => '成功交易', 'issue' => '用户认购');		$nameid_list = array('mycz' => U('Mycz/index'), 'mytx' => U('Mytx/index'), 'trade' => U('Trade/index'), 'tradelog' => U('Tradelog/index'), 'issue' => U('Issue/index'));		foreach ($list as $k => $v) {			$list[$k]['username'] = M('User')->where(array('id' => $v['userid']))->getField('username');			$list[$k]['num_a'] = Num($v['num_a']);			$list[$k]['num_b'] = Num($v['num_b']);			$list[$k]['num'] = Num($v['num']);			$list[$k]['fee'] = Num($v['fee']);			$list[$k]['type'] = ($v['fee'] == 1 ? '收入' : '支出');			$list[$k]['name'] = ($name_list[$v['name']] ? $name_list[$v['name']] : $v['name']);			$list[$k]['nameid'] = ($name_list[$v['name']] ? $nameid_list[$v['name']] . '?id=' . $v['nameid'] : '');			$list[$k]['mum_a'] = Num($v['mum_a']);			$list[$k]['mum_b'] = Num($v['mum_b']);			$list[$k]['mum'] = Num($v['mum']);			$list[$k]['addtime'] = addtime($v['addtime']);		}		$this->assign('list', $list);		$this->assign('page', $show);		$this->display();	}	public function myzr($field = NULL, $name = NULL, $coinname = NULL)	{		$where = array();		if ($field && $name) {			if ($field == 'username') {				$where['userid'] = M('User')->where(array('username' => $name))->getField('id');			}			else {				$where[$field] = $name;			}		}		if ($coinname) {			$where['coinname'] = $coinname;		}		$count = M('Myzr')->where($where)->count();		$Page = new \Think\Page($count, 15);		$show = $Page->show();		$list = M('Myzr')->where($where)->order('id desc')->limit($Page->firstRow . ',' . $Page->listRows)->select();		foreach ($list as $k => $v) {			$list[$k]['usernamea'] = M('User')->where(array('id' => $v['userid']))->getField('username');		}		$this->assign('list', $list);		$this->assign('page', $show);		$this->display();	}	public function myzc($field = NULL, $name = NULL, $coinname = NULL)	{		$where = array();		if ($field && $name) {			if ($field == 'username') {				$where['userid'] = M('User')->where(array('username' => $name))->getField('id');			}			else {				$where[$field] = $name;			}		}		if ($coinname) {			$where['coinname'] = $coinname;		}		$count = M('Myzc')->where($where)->count();		$Page = new \Think\Page($count, 15);		$show = $Page->show();		$list = M('Myzc')->where($where)->order('id desc')->limit($Page->firstRow . ',' . $Page->listRows)->select();		foreach ($list as $k => $v) {			$list[$k]['usernamea'] = M('User')->where(array('id' => $v['userid']))->getField('username');		}		$this->assign('list', $list);		$this->assign('page', $show);		$this->display();	}	public function myzcQueren($id = NULL)	{		$myzc = M('Myzc')->where(array('id' => trim($id)))->find();		if (!$myzc) {			$this->error('转出错误！');		}		if ($myzc['status']) {			$this->error('已经处理过！');		}		$mo = M();		$mo->execute('set autocommit=0');		$mo->execute('lock tables  cy_user_coin write  , cy_myzc write  , cy_myzr write , cy_myzc_fee write');		$rs = array();		$rs[] = M('Myzc')->where(array('id' => trim($id)))->save(array('status' => 1));		if (check_arr($rs)) {			$mo->execute('commit');			$mo->execute('unlock tables');		   $this->success('转账成功！');		}		else {			$mo->execute('rollback');			$mo->execute('unlock tables');            $this->error('转账失败！');		}	}	public function checkUpdata()	{		if (S(MODULE_NAME . CONTROLLER_NAME . 'checkUpdata')) {			$tables = M()->query('show tables');			$tableMap = array();			foreach ($tables as $table) {				$tableMap[reset($table)] = 1;			}			if (!isset($tableMap['cy_finance'])) {				M()->execute("\r\n" . '                   CREATE TABLE `cy_finance` (' . "\r\n\t" . '`id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT COMMENT \'自增id\',' . "\r\n\t" . '`userid` INT(11) UNSIGNED NOT NULL COMMENT \'用户id\',' . "\r\n\t" . '`coinname` VARCHAR(50) NOT NULL COMMENT \'币种\',' . "\r\n\t" . '`num_a` DECIMAL(20,8) UNSIGNED NOT NULL COMMENT \'之前正常\',' . "\r\n\t" . '`num_b` DECIMAL(20,8) UNSIGNED NOT NULL COMMENT \'之前冻结\',' . "\r\n\t" . '`num` DECIMAL(20,8) UNSIGNED NOT NULL COMMENT \'之前总计\',' . "\r\n\t" . '`fee` DECIMAL(20,8) UNSIGNED NOT NULL COMMENT \'操作数量\',' . "\r\n\t" . '`type` VARCHAR(50) NOT NULL COMMENT \'操作类型\',' . "\r\n\t" . '`name` VARCHAR(50) NOT NULL COMMENT \'操作名称\',' . "\r\n\t" . '`nameid` INT(11) NOT NULL COMMENT \'操作详细\',' . "\r\n\t" . '`remark` VARCHAR(50) NOT NULL COMMENT \'操作备注\',' . "\r\n\t" . '`mum_a` DECIMAL(20,8) UNSIGNED NOT NULL COMMENT \'剩余正常\',' . "\r\n\t" . '`mum_b` DECIMAL(20,8) UNSIGNED NOT NULL COMMENT \'剩余冻结\',' . "\r\n\t" . '`mum` DECIMAL(20,8) UNSIGNED NOT NULL COMMENT \'剩余总计\',' . "\r\n\t" . '`move` VARCHAR(50) NOT NULL COMMENT \'附加\',' . "\r\n\t" . '`addtime` INT(11) UNSIGNED NOT NULL COMMENT \'添加时间\',' . "\r\n\t" . '`status` TINYINT(4) UNSIGNED NOT NULL COMMENT \'状态\',' . "\r\n\t" . 'PRIMARY KEY (`id`),' . "\r\n\t" . 'INDEX `userid` (`userid`),' . "\r\n\t" . 'INDEX `coinname` (`coinname`),' . "\r\n\t" . 'INDEX `status` (`status`)' . "\r\n" . ')' . "\r\n" . 'COLLATE=\'utf8_general_ci\'' . "\r\n" . 'ENGINE=InnoDB' . "\r\n" . ';' . "\r\n\r\n" . '                ');			}			$Config_DbFields = M('MyczType')->getDbFields();			if (!in_array('truename', $Config_DbFields)) {				M()->execute('ALTER TABLE `cy_mycz_type` ADD COLUMN `truename` VARCHAR(200)  NOT NULL   COMMENT \'名称\' AFTER `id`;');			}			if (!in_array('kaihu', $Config_DbFields)) {				M()->execute('ALTER TABLE `cy_mycz_type` ADD COLUMN `kaihu` VARCHAR(200)  NOT NULL   COMMENT \'名称\' AFTER `id`;');			}			if (!in_array('img', $Config_DbFields)) {				M()->execute('ALTER TABLE `cy_mycz_type` ADD COLUMN `img` VARCHAR(200)  NOT NULL   COMMENT \'名称\' AFTER `id`;');			}			if (!in_array('min', $Config_DbFields)) {				M()->execute('ALTER TABLE `cy_mycz_type` ADD COLUMN `min` VARCHAR(200)  NOT NULL   COMMENT \'名称\' AFTER `id`;');			}			if (!in_array('max', $Config_DbFields)) {				M()->execute('ALTER TABLE `cy_mycz_type` ADD COLUMN `max` VARCHAR(200)  NOT NULL   COMMENT \'名称\' AFTER `id`;');			}			if (!in_array('username', $Config_DbFields)) {				M()->execute('ALTER TABLE `cy_mycz_type` ADD COLUMN `username` VARCHAR(200)  NOT NULL   COMMENT \'名称\' AFTER `id`;');			}			$list = M('Menu')->where(array(				'url' => 'Finance/index',				'pid' => array('neq', 0)				))->select();			if ($list[1]) {				M('Menu')->where(array('id' => $list[1]['id']))->delete();			}			else if (!$list) {				M('Menu')->add(array('url' => 'Finance/index', 'title' => '财务明细', 'pid' => 4, 'sort' => 1, 'hide' => 1, 'group' => '财务', 'ico_name' => 'th-list'));			}			else {				M('Menu')->where(array(					'url' => 'Finance/index',					'pid' => array('neq', 0)					))->save(array('title' => '财务明细', 'pid' => 4, 'sort' => 1, 'hide' => 1, 'group' => '财务', 'ico_name' => 'th-list'));			}			$list = M('Menu')->where(array(				'url' => 'Finance/mycz',				'pid' => array('neq', 0)				))->select();			if ($list[1]) {				M('Menu')->where(array('id' => $list[1]['id']))->delete();			}			else if (!$list) {				M('Menu')->add(array('url' => 'Finance/mycz', 'title' => '人民币充值', 'pid' => 4, 'sort' => 2, 'hide' => 1, 'group' => '财务', 'ico_name' => 'th-list'));			}			else {				M('Menu')->where(array(					'url' => 'Finance/mycz',					'pid' => array('neq', 0)					))->save(array('title' => '人民币充值', 'pid' => 4, 'sort' => 2, 'hide' => 1, 'group' => '财务', 'ico_name' => 'th-list'));			}			$list = M('Menu')->where(array(				'url' => 'Finance/myczType',				'pid' => array('neq', 0)				))->select();			if ($list[1]) {				M('Menu')->where(array('id' => $list[1]['id']))->delete();			}			else if (!$list) {				M('Menu')->add(array('url' => 'Finance/myczType', 'title' => '人民币充值方式', 'pid' => 4, 'sort' => 3, 'hide' => 1, 'group' => '财务', 'ico_name' => 'th-list'));			}			else {				M('Menu')->where(array(					'url' => 'Finance/myczType',					'pid' => array('neq', 0)					))->save(array('title' => '人民币充值方式', 'pid' => 4, 'sort' => 3, 'hide' => 1, 'group' => '财务', 'ico_name' => 'th-list'));			}			$list = M('Menu')->where(array(				'url' => 'Finance/mytx',				'pid' => array('neq', 0)				))->select();			if ($list[1]) {				M('Menu')->where(array('id' => $list[1]['id']))->delete();			}			else if (!$list) {				M('Menu')->add(array('url' => 'Finance/mytx', 'title' => '人民币提现', 'pid' => 4, 'sort' => 4, 'hide' => 1, 'group' => '财务', 'ico_name' => 'th-list'));			}			else {				M('Menu')->where(array(					'url' => 'Finance/mytx',					'pid' => array('neq', 0)					))->save(array('title' => '人民币提现', 'pid' => 4, 'sort' => 4, 'hide' => 1, 'group' => '财务', 'ico_name' => 'th-list'));			}			$list = M('Menu')->where(array(				'url' => 'Finance/mytxConfig',				'pid' => array('neq', 0)				))->select();			if ($list[1]) {				M('Menu')->where(array('id' => $list[1]['id']))->delete();			}			else if (!$list) {				M('Menu')->add(array('url' => 'Finance/mytxConfig', 'title' => '人民币提现配置', 'pid' => 4, 'sort' => 5, 'hide' => 1, 'group' => '财务', 'ico_name' => 'th-list'));			}			else {				M('Menu')->where(array(					'url' => 'Finance/mytxConfig',					'pid' => array('neq', 0)					))->save(array('title' => '人民币提现配置', 'pid' => 4, 'sort' => 5, 'hide' => 1, 'group' => '财务', 'ico_name' => 'th-list'));			}			$list = M('Menu')->where(array(				'url' => 'Finance/myzr',				'pid' => array('neq', 0)				))->select();			if ($list[1]) {				M('Menu')->where(array('id' => $list[1]['id']))->delete();			}			else if (!$list) {				M('Menu')->add(array('url' => 'Finance/myzr', 'title' => '虚拟币转入', 'pid' => 4, 'sort' => 6, 'hide' => 0, 'group' => '财务', 'ico_name' => 'th-list'));			}			else {				M('Menu')->where(array(					'url' => 'Finance/myzr',					'pid' => array('neq', 0)					))->save(array('title' => '虚拟币转入', 'pid' => 4, 'sort' => 6, 'hide' => 0, 'group' => '财务', 'ico_name' => 'th-list'));			}			$list = M('Menu')->where(array(				'url' => 'Finance/myzc',				'pid' => array('neq', 0)				))->select();			if ($list[1]) {				M('Menu')->where(array('id' => $list[1]['id']))->delete();			}			else if (!$list) {				M('Menu')->add(array('url' => 'Finance/myzc', 'title' => '虚拟币转出', 'pid' => 4, 'sort' => 7, 'hide' => 0, 'group' => '财务', 'ico_name' => 'th-list'));			}			else {				M('Menu')->where(array(					'url' => 'Finance/myzc',					'pid' => array('neq', 0)					))->save(array('title' => '虚拟币转出', 'pid' => 4, 'sort' => 7, 'hide' => 0, 'group' => '财务', 'ico_name' => 'th-list'));			}			$list = M('Menu')->where(array(				'url' => 'Finance/myczStatus',				'pid' => array('neq', 0)				))->select();			if ($list[1]) {				M('Menu')->where(array('id' => $list[1]['id']))->delete();			}			else {				$pid = M('Menu')->where(array(					'url' => 'Finance/mycz',					'pid' => array('neq', 0)					))->getField('id');				if (!$list) {					M('Menu')->add(array('url' => 'Finance/myczStatus', 'title' => '修改状态', 'pid' => $pid, 'sort' => 100, 'hide' => 1, 'group' => '财务', 'ico_name' => 'home'));				}				else {					M('Menu')->where(array(						'url' => 'Finance/myczStatus',						'pid' => array('neq', 0)						))->save(array('title' => '修改状态', 'pid' => $pid, 'sort' => 100, 'hide' => 1, 'group' => '财务', 'ico_name' => 'home'));				}			}			$list = M('Menu')->where(array(				'url' => 'Finance/myczQueren',				'pid' => array('neq', 0)				))->select();			if ($list[1]) {				M('Menu')->where(array('id' => $list[1]['id']))->delete();			}			else {				$pid = M('Menu')->where(array(					'url' => 'Finance/mycz',					'pid' => array('neq', 0)					))->getField('id');				if (!$list) {					M('Menu')->add(array('url' => 'Finance/myczQueren', 'title' => '确认到账', 'pid' => $pid, 'sort' => 100, 'hide' => 1, 'group' => '财务', 'ico_name' => 'home'));				}				else {					M('Menu')->where(array(						'url' => 'Finance/myczQueren',						'pid' => array('neq', 0)						))->save(array('title' => '确认到账', 'pid' => $pid, 'sort' => 100, 'hide' => 1, 'group' => '财务', 'ico_name' => 'home'));				}			}			$list = M('Menu')->where(array(				'url' => 'Finance/myczTypeEdit',				'pid' => array('neq', 0)				))->select();			if ($list[1]) {				M('Menu')->where(array('id' => $list[1]['id']))->delete();			}			else {				$pid = M('Menu')->where(array(					'url' => 'Finance/myczType',					'pid' => array('neq', 0)					))->getField('id');				if (!$list) {					M('Menu')->add(array('url' => 'Finance/myczTypeEdit', 'title' => '编辑添加', 'pid' => $pid, 'sort' => 1, 'hide' => 1, 'group' => '财务', 'ico_name' => 'home'));				}				else {					M('Menu')->where(array(						'url' => 'Finance/myczTypeEdit',						'pid' => array('neq', 0)						))->save(array('title' => '编辑添加', 'pid' => $pid, 'sort' => 1, 'hide' => 1, 'group' => '财务', 'ico_name' => 'home'));				}			}			$list = M('Menu')->where(array(				'url' => 'Finance/myczTypeStatus',				'pid' => array('neq', 0)				))->select();			if ($list[1]) {				M('Menu')->where(array('id' => $list[1]['id']))->delete();			}			else {				$pid = M('Menu')->where(array(					'url' => 'Finance/myczType',					'pid' => array('neq', 0)					))->getField('id');				if (!$list) {					M('Menu')->add(array('url' => 'Finance/myczTypeStatus', 'title' => '状态修改', 'pid' => $pid, 'sort' => 2, 'hide' => 1, 'group' => '财务', 'ico_name' => 'home'));				}				else {					M('Menu')->where(array(						'url' => 'Finance/myczTypeStatus',						'pid' => array('neq', 0)						))->save(array('title' => '状态修改', 'pid' => $pid, 'sort' => 2, 'hide' => 1, 'group' => '财务', 'ico_name' => 'home'));				}			}			$list = M('Menu')->where(array(				'url' => 'Finance/myczTypeImage',				'pid' => array('neq', 0)				))->select();			if ($list[1]) {				M('Menu')->where(array('id' => $list[1]['id']))->delete();			}			else {				$pid = M('Menu')->where(array(					'url' => 'Finance/myczType',					'pid' => array('neq', 0)					))->getField('id');				if (!$list) {					M('Menu')->add(array('url' => 'Finance/myczTypeImage', 'title' => '上传图片', 'pid' => $pid, 'sort' => 2, 'hide' => 1, 'group' => '财务', 'ico_name' => 'home'));				}				else {					M('Menu')->where(array(						'url' => 'Finance/myczTypeImage',						'pid' => array('neq', 0)						))->save(array('title' => '上传图片', 'pid' => $pid, 'sort' => 2, 'hide' => 1, 'group' => '财务', 'ico_name' => 'home'));				}			}			$list = M('Menu')->where(array(				'url' => 'Finance/mytxStatus',				'pid' => array('neq', 0)				))->select();			if ($list[1]) {				M('Menu')->where(array('id' => $list[1]['id']))->delete();			}			else {				$pid = M('Menu')->where(array(					'url' => 'Finance/mytx',					'pid' => array('neq', 0)					))->getField('id');				if (!$list) {					M('Menu')->add(array('url' => 'Finance/mytxStatus', 'title' => '修改状态', 'pid' => $pid, 'sort' => 2, 'hide' => 1, 'group' => '财务', 'ico_name' => 'home'));				}				else {					M('Menu')->where(array(						'url' => 'Finance/mytxStatus',						'pid' => array('neq', 0)						))->save(array('title' => '修改状态', 'pid' => $pid, 'sort' => 2, 'hide' => 1, 'group' => '财务', 'ico_name' => 'home'));				}			}			$list = M('Menu')->where(array(				'url' => 'Finance/mytxExcel',				'pid' => array('neq', 0)				))->select();			if ($list[1]) {				M('Menu')->where(array('id' => $list[1]['id']))->delete();			}			else {				$pid = M('Menu')->where(array(					'url' => 'Finance/mytx',					'pid' => array('neq', 0)					))->getField('id');				if (!$list) {					M('Menu')->add(array('url' => 'Finance/mytxExcel', 'title' => '导出选中', 'pid' => $pid, 'sort' => 3, 'hide' => 1, 'group' => '财务', 'ico_name' => 'home'));				}				else {					M('Menu')->where(array(						'url' => 'Finance/mytxExcel',						'pid' => array('neq', 0)						))->save(array('title' => '导出选中', 'pid' => $pid, 'sort' => 3, 'hide' => 1, 'group' => '财务', 'ico_name' => 'home'));				}			}			$list = M('Menu')->where(array(				'url' => 'Finance/mytxChuli',				'pid' => array('neq', 0)				))->select();			if ($list[1]) {				M('Menu')->where(array('id' => $list[1]['id']))->delete();			}			else {				$pid = M('Menu')->where(array(					'url' => 'Finance/mytx',					'pid' => array('neq', 0)					))->getField('id');				if (!$list) {					M('Menu')->add(array('url' => 'Finance/mytxChuli', 'title' => '正在处理', 'pid' => $pid, 'sort' => 4, 'hide' => 1, 'group' => '财务', 'ico_name' => 'home'));				}				else {					M('Menu')->where(array(						'url' => 'Finance/mytxChuli',						'pid' => array('neq', 0)						))->save(array('title' => '正在处理', 'pid' => $pid, 'sort' => 4, 'hide' => 1, 'group' => '财务', 'ico_name' => 'home'));				}			}			$list = M('Menu')->where(array(				'url' => 'Finance/mytxChexiao',				'pid' => array('neq', 0)				))->select();			if ($list[1]) {				M('Menu')->where(array('id' => $list[1]['id']))->delete();			}			else {				$pid = M('Menu')->where(array(					'url' => 'Finance/mytx',					'pid' => array('neq', 0)					))->getField('id');				if (!$list) {					M('Menu')->add(array('url' => 'Finance/mytxChexiao', 'title' => '撤销提现', 'pid' => $pid, 'sort' => 5, 'hide' => 1, 'group' => '财务', 'ico_name' => 'home'));				}				else {					M('Menu')->where(array(						'url' => 'Finance/mytxChexiao',						'pid' => array('neq', 0)						))->save(array('title' => '撤销提现', 'pid' => $pid, 'sort' => 5, 'hide' => 1, 'group' => '财务', 'ico_name' => 'home'));				}			}			$list = M('Menu')->where(array(				'url' => 'Finance/mytxQueren',				'pid' => array('neq', 0)				))->select();			if ($list[1]) {				M('Menu')->where(array('id' => $list[1]['id']))->delete();			}			else {				$pid = M('Menu')->where(array(					'url' => 'Finance/mytx',					'pid' => array('neq', 0)					))->getField('id');				if (!$list) {					M('Menu')->add(array('url' => 'Finance/mytxQueren', 'title' => '确认提现', 'pid' => $pid, 'sort' => 6, 'hide' => 1, 'group' => '财务', 'ico_name' => 'home'));				}				else {					M('Menu')->where(array(						'url' => 'Finance/mytxQueren',						'pid' => array('neq', 0)						))->save(array('title' => '确认提现', 'pid' => $pid, 'sort' => 6, 'hide' => 1, 'group' => '财务', 'ico_name' => 'home'));				}			}			$list = M('Menu')->where(array(				'url' => 'Finance/myzcQueren',				'pid' => array('neq', 0)				))->select();			if ($list[1]) {				M('Menu')->where(array('id' => $list[1]['id']))->delete();			}			else {				$pid = M('Menu')->where(array(					'url' => 'Finance/myzc',					'pid' => array('neq', 0)					))->getField('id');				if (!$list) {					M('Menu')->add(array('url' => 'Finance/myzcQueren', 'title' => '确认转出', 'pid' => $pid, 'sort' => 6, 'hide' => 1, 'group' => '财务', 'ico_name' => 'home'));				}				else {					M('Menu')->where(array(						'url' => 'Finance/myzcQueren',						'pid' => array('neq', 0)						))->save(array('title' => '确认转出', 'pid' => $pid, 'sort' => 6, 'hide' => 1, 'group' => '财务', 'ico_name' => 'home'));				}			}			if (M('Menu')->where(array('url' => 'Mycz/index'))->delete()) {				M('AuthRule')->where(array('status' => 1))->delete();			}			if (M('Menu')->where(array('url' => 'Mycztype/index'))->delete()) {				M('AuthRule')->where(array('status' => 1))->delete();			}			if (M('Menu')->where(array('url' => 'Mycz/type'))->delete()) {				M('AuthRule')->where(array('status' => 1))->delete();			}			if (M('Menu')->where(array('url' => 'Mycz/invit'))->delete()) {				M('AuthRule')->where(array('status' => 1))->delete();			}			if (M('Menu')->where(array('url' => 'Mycz/config'))->delete()) {				M('AuthRule')->where(array('status' => 1))->delete();			}			if (M('Menu')->where(array('url' => 'Mytx/index'))->delete()) {				M('AuthRule')->where(array('status' => 1))->delete();			}			if (M('Menu')->where(array('url' => 'Config/mytx'))->delete()) {				M('AuthRule')->where(array('status' => 1))->delete();			}			if (M('Menu')->where(array('url' => 'Myzc/index'))->delete()) {				M('AuthRule')->where(array('status' => 1))->delete();			}			if (M('Menu')->where(array('url' => 'Myzr/index'))->delete()) {				M('AuthRule')->where(array('status' => 1))->delete();			}			if (M('Menu')->where(array('url' => 'Config/mycz'))->delete()) {				M('AuthRule')->where(array('status' => 1))->delete();			}			S(MODULE_NAME . CONTROLLER_NAME . 'checkUpdata', 1);		}	}}?>